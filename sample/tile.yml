---
name: test-tile
label: Generated Test Tile
description: A sample tile generated by tile-generator
icon_file: resources/icon.png

# Global defaults (all optional)
# org: test-org                       # Optional
# space: test-space                   # Optional
# docker_bosh_version: '28'           # Optional, default: latest release
# apply_open_security_group: true     # Apply open security group, default: false
allow_paid_service_plans: true        # Allow paid service plans, default: false
standalone: false                     # Suppress default CF properties in property_blueprints metadata, default: false

properties:
- name: author
  type: string
  label: Author
  value: Tile Ninja

#At least one form must be defined in tile.yml, otherwise there will be errors when staging the tile in Ops Manager
forms: 
- name: contact_form
  label: Contact Info
  description: Examples of basic property types
  properties:
  - name: customer_name
    type: string
    label: Customer Name
    optional: true
  - name: street_address
    type: string
    label: Street Address
    description: Address to use for junk mail
    optional: false
  - name: city
    type: string
    label: City
  - name: zip_code
    type: string
    label: ZIP+4
    default: '90310'
  - name: country
    type: dropdown_select
    label: Country
    options:
    - name: country_us
      label: US
      default: true
    - name: country_elsewhere
      label: Elsewhere
- name: albums_form
  label: Albums
  description: Example of collection property type
  properties:
  - name: example_collection
    type: collection
    label: Albums
    configurable: true
    property_blueprints:
    # - name: id
    #   type: uuid
    - name: album
      type: string
      label: Album
    - name: artist
      type: string
      label: Artist
    - name: explicit
      type: boolean
      label: Explicit
    default:
    - album: Christmas Carols
      artist: Ops Manatee
      explicit: true
- name: food_form
  label: Food Order
  description: Example of selector property type
  properties:
  - name: example_selector
    type: selector
    label: Food Choices
    configurable: true
    default: Pizza
    option_templates:
    - name: pizza_option
      select_value: Pizza
      property_blueprints:
      - name: pepperoni
        type: boolean
        label: Pepperoni
        configurable: true
      - name: pineapple
        label: Pineapple
        type: boolean
        configurable: true
      - name: other_toppings
        label: Other Toppings
        type: string
        configurable: true
        optional: true
    - name: filet_mignon_option
      select_value: Filet Mignon
      property_blueprints:
      - name: steak_creds
        type: simple_credentials
        label: Complex type inside selector
        configurable: true
      - name: rarity_dropdown
        label: How rare?
        type: dropdown_select
        configurable: true
        default: rare
        options:
        - name: rare
          label: 'Rare'
        - name: medium
          label: 'Medium'
        - name: well-done
          label: 'Well done'
- name: credentials_form
  label: Credentials
  description: Examples of secret property types
  properties:
  - name: my_creds
    type: simple_credentials
    label: Simple Credentials
    description: Example of simple credentials type
  - name: username
    type: string
    label: Username
    constraints:
    - must_match_regex: '^[^!@#$%^&*()]*$'
      error_message: 'This name cannot contain capital digits.'
  - name: password
    type: secret
    label: Password
- name: update_form
  label: Update Settings
  description: Example of user-configured update Settings
  properties:
  - name: canary_watch_timeout
    type: integer
    label: Canary Watch Timeout
    description: Maximum amount of time to allow canaries to take before going healthy
  - name: update_watch_timeout
    type: integer
    label: Update Watch Timeout
    description: Maximum amount of time to allow non-canaries to take before going healthy
- name: selector_without_subproperties
  label: Selector without subproperties
  description: "Configure this feature."
  properties:
  - name: is_feature_enabled
    type: selector
    label: "Enable this feature?"
    description: "Choose whether or not to enable this feature."
    configurable: true
    default: feature_disabled
    optional: false
    option_templates:
    - name: feature_enabled
      select_value: feature_enabled
      label: Enable feature
      description: Enable this feature (requires more config).
      property_blueprints:
      - name: feature_config
        type: string
        label: Configure this feature
        configurable: true
    - name: feature_disabled
      select_value: feature_disabled
      label: Disable feature
      description: Disable this feature (no more config).

- name: planets_form
  label: Multi-Select Example
  properties:
  - name: planets
    label: Planets
    type: multi_select_options
    configurable: true
    optional: true
    options:
    - name: mercury
      label: mercury
    - name: Venus
      label: venus
    - name: Earth
      label: earth
    - name: Mars
      label: mars
    - name: Jupiter
      label: jupiter
    - name: Saturn
      label: saturn
    - name: Uranus
      label: uranus
    - name: Neptune
      label: neptune

- name: app_manifest_form
  label: App manifest config
  properties:
  - name: app_instances
    type: integer
    label: Dynamic app instance count
    default: 2

- name: auto_services_form
  label: Auto services config
  properties:
  - name: auto_service_name
    type: string
    label: Auto services service name
    default: tg-test-broker1-service

update:
  canary_watch_time: 10000-(( .properties.canary_watch_timeout ))
  update_watch_time: 10000-(( .properties.update_watch_timeout ))

service_plan_forms:
- name: custom_dynamic_service_plan_1
  label: Custom Dynamic Service Plan 1
  description: Custom Dynamic service plan 1 for Test Tile
  properties:
  - name: description1
    type: string
    configurable: true
    description: The description of this plan
  - name: license_key1
    type: string
    configurable: true
    description: The license key for this plan
  - name: num_seats1
    type: integer
    configurable: true
    description: The number of available seats for this license
    default: 1
    constraints:
      min: 1
      max: 500
- name: custom_dynamic_service_plan_2
  label: Custom Dynamic Service Plan 2
  description: Custom Dynamic service plan 2 for Test Tile
  properties:
  - name: description2
    type: string
    configurable: true
    description: The description of this plan
  - name: api_key2
    type: string
    configurable: true
    description: The api key for this plan
  - name: num_of_license2
    type: integer
    configurable: true
    description: The number of licenses
    default: 1

packages:

- name: tg-test-app1                  # App with minimal configuration, i.e. all default values
  type: app
  manifest:
    path: resources/app.zip
    command: python app.py            # This is required for python, optional for many other languages
    memory: 256M                      # Override memory, default: 1G
    buildpack: python_buildpack       # Specify Buildpack for the app
    instances: (( .properties.app_instances.value ))
